{"version":3,"file":"static/webpack/static/development/pages/index.js.64f6b2627d0867137f96.hot-update.js","sources":["webpack:///./components/Piecemeal.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport axios from 'axios'\nexport default class Piecemeal extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            list:[],\n            value: this.props.value\n        }\n        this.addcar = this.addcar.bind(this);\n        const {onIncreaseClick} = this.props;\n        this.onIncreaseClick = onIncreaseClick;\n    }\n    componentWillMount(){\n        // let _this = this;\n        // const promise =new Promise((resolve)=>{\n        //     axios('../automobile/list.json').then(\n        //         (res)=>{\n        //             resolve(res.data)\n        //         }\n        //     )\n        // })\n        // promise.then(function(res){\n        //     let newarr = res.map(function(item){\n        //         return {...item,addnum: 0}\n        //     })\n        //     _this.setState({\n        //         list: newarr \n        //     })\n        // })\n        this.setState({\n            list:[\n                {\n                    \"img\":\"images/zhengjiao.jpg\",\n                    \"name\":\"蒸饺\",\n                    \"number\":\"6\",\n                    \"addnum\": 0\n                },\n                {\n                    \"img\":\"huasheng.jpg\",\n                    \"name\":\"花生米\",\n                    \"number\":\"10\",\n                    \"addnum\": 0\n                },    \n                {\n                    \"img\":\"zhacai.jpg\",\n                    \"name\":\"榨菜\",\n                    \"number\":\"12\",\n                    \"addnum\": 0\n                },\n                {\n                    \"img\":\"images/naicha.jpg\",\n                    \"name\":\"奶茶\",\n                    \"number\":\"25\",\n                    \"addnum\": 0\n                },\n                {\n                    \"img\":\"images/zhurou.jpg\",\n                    \"name\":\"猪肉\",\n                    \"number\":\"30\",\n                    \"addnum\": 0\n                },\n                {\n                    \"img\":\"images/fangtuo.jpg\",\n                    \"name\":\"防脱洗发液\",\n                    \"number\":\"70\",\n                    \"addnum\": 0\n                }\n            ]\n        })\n    }\n    addcar(i){\n        let newaddnum = this.state.list[i].addnum+=1;\n        let newmoney = this.state.list[i].number;\n        let newprodata = this.state.value - (newaddnum*newmoney);\n        this.onIncreaseClick(newprodata);\n        let newlist = Object.assign([],this.state.list);\n        this.setState({\n            list:newlist\n        })\n    }\n    reducecar(i){\n        if(this.state.list[i].addnum > 0){\n            let newaddnum = this.state.list[i].addnum-=1;\n            let newmoney = this.state.list[i].number;\n            let newprodata = this.state.value + (newaddnum*newmoney);\n            this.onIncreaseClick(newprodata);\n            let newlist = Object.assign([],this.state.list);\n            this.setState({\n                list:newlist\n            })\n        }\n        return false;\n    }\n    addlist(){\n        let arr;\n        if(this.state.list.length){\n        arr = this.state.list.map((item,i) =>{\n            return (<div className=\"auto_list\" key={i}>\n                    <img src={item.img}/>\n                    <h3>{item.name}<span className=\"price\">￥{item.number}</span></h3>\n                    <div className=\"add_button\">\n                        <div className=\"control\">\n                            <div className=\"subtraction\" onClick={()=>this.reducecar(i)}>\n                                -\n                            </div>\n                            <div className=\"addnum\">{item.addnum}</div>\n                            <div className=\"addition\" onClick={()=>this.addcar(i)}>\n                                +\n                            </div>\n                        </div>\n                        <button className=\"increase\" onClick={()=>this.addcar(i)}>加入购物车</button>\n                    </div>\n                </div>)\n            })\n        }\n        return arr;\n    }\n    render() {\n        return (\n            <>         \n                <div>{this.addlist()}</div>\n            </> \n        );\n    }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AANA;AAQA;AARA;AASA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AAJA;AAhCA;AAwCA;;;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AADA;AAGA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AADA;AAGA;AACA;AAAA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AACA;;;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AA1HA;AACA;;;;;A","sourceRoot":""}